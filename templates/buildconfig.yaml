apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  name: bcbsfl-nginx-inline-build
  labels:
    app: bcbsfl-nginx-inline
spec:
  # --- SOURCE: INLINE DOCKERFILE, NO GIT ---
  source:
    type: Dockerfile
    dockerfile: |
      FROM nginx:1.27-alpine

      # Overwrite default nginx index.html with our custom message
      RUN printf '%s\n' \
        '<!DOCTYPE html>' \
        '<html>' \
        '  <head><title>BCBSFL Nginx Demo</title></head>' \
        '  <body><h1>welcome to bcbsfl</h1></body>' \
        '</html>' \
        > /usr/share/nginx/html/index.html

      EXPOSE 80

  # --- BUILD STRATEGY: DOCKER ---
  strategy:
    type: Docker
    dockerStrategy: {}

  # --- OUTPUT: PUSH IMAGE TO QUAY ---
  output:
    to:
      kind: DockerImage
      name: quay.io/bcbsfl/bcbsfl-nginx-inline:latest   # <--- change org/repo if needed
    pushSecret:
      name: quay-registry-secret                        # <--- must already exist in namespace

  # --- TRIGGERS ---
  triggers:
    - type: ConfigChange






new_---

spec:
  source:
    type: Dockerfile
    dockerfile: |
      FROM quay-enterprise.apps.ose4-dev.bcbsfl.com/ocp-image/nginx-124-ubi9

      # Create a very simple index.html
      RUN mkdir -p /usr/share/nginx/html && \
          printf '%s\n' \
            '<!DOCTYPE html>' \
            '<html>' \
            '  <head><title>BCBSFL Nginx Demo</title></head>' \
            '  <body><h1>welcome to bcbsfl</h1></body>' \
            '</html>' \
            > /usr/share/nginx/html/index.html

      # Optional â€“ expose port if you want (build will succeed even without this)
      EXPOSE 8080



--new


apiVersion: build.openshift.io/v1
kind: BuildConfig
metadata:
  name: bcbsfl-nginx-inline-build
  labels:
    app: bcbsfl-nginx-inline
spec:
  source:
    type: Dockerfile
    dockerfile: |
      FROM quay-enterprise.apps.ose4-dev.bcbsfl.com/ocp-image/nginx-124-ubi9

      RUN mkdir -p /usr/share/nginx/html && \
          printf '%s\n' \
            '<!DOCTYPE html>' \
            '<html>' \
            '  <head><title>BCBSFL Nginx Demo</title></head>' \
            '  <body><h1>welcome to bcbsfl</h1></body>' \
            '</html>' \
            > /usr/share/nginx/html/index.html

      EXPOSE 8080

  strategy:
    type: Docker
    dockerStrategy: {}

  output:
    to:
      kind: DockerImage
      name: quay-enterprise.apps.ose4-dev.bcbsfl.com/n5bp/argocd-cicd:latest
    pushSecret:
      name: n5bp-test-pull-secret    # must already exist in the namespace

  triggers:
    - type: ConfigChange
